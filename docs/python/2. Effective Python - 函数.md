# 函数

- [函数](#函数)
  - [14. 尽量使用异常表示特殊情况，而不是返回None](#14-尽量使用异常表示特殊情况而不是返回none)
  - [15. 了解闭包中访问外围作用域中变量](#15-了解闭包中访问外围作用域中变量)
  - [16. 考虑使用生成器改写直接返回列表的函数](#16-考虑使用生成器改写直接返回列表的函数)
  - [17. 在函数参数上迭代时，要小心默认处理](#17-在函数参数上迭代时要小心默认处理)
  - [18. 用数量可变的位置参数减少干扰](#18-用数量可变的位置参数减少干扰)
  - [19. 用关键字参数来表达可选的行为](#19-用关键字参数来表达可选的行为)
  - [20. 用None和docstring来描述具有动态默认值的参数](#20-用none和docstring来描述具有动态默认值的参数)
  - [21. 用只能以关键字形式指定的参数来确保代码明晰](#21-用只能以关键字形式指定的参数来确保代码明晰)
  - [总结](#总结)

## 14. 尽量使用异常表示特殊情况，而不是返回None

- not 空列表、false、0和not None都返回true, 无法准确区分None和其他几种场景。
- 示例：除法运算，分母为0若返回None，`if not xxx`就无法区分和分子为0时产生的正确值，使用上容易出错

## 15. 了解闭包中访问外围作用域中变量

- LEGB：locals -> enclosing -> globals -> builtins
- nonlocal, python2使用可变对象

## 16. 考虑使用生成器改写直接返回列表的函数

- 生成器一次产生一个值，节省内存
- 类似Pythonic中第9条"用生成器表达式改写数据量较大的列表推导", 当前场景在函数中，使用yield

## 17. 在函数参数上迭代时，要小心默认处理

- 无法正确区分迭代器终止或者空值；拷贝迭代器，大数据量存在内存问题
- 实现迭代器协议：`__iter__`,`__next__`

## 18. 用数量可变的位置参数减少干扰

- 使用`*args`可变参数：参数放入元组，大量参数可能存在内存问题；只适合参数数量较少的场景
- 已接收`*args`参数的函数上添加位置参数，可能产生难以排查的问题，函数调用参数错位

## 19. 用关键字参数来表达可选的行为

- 关键字参数的顺序不限，位置参数必须出现在关键字参数之前；每个参数只能制定一次
- 关键字参数添加行为时，可以提供默认值，以保持兼容
- 可选的关键字参数，应该用关键字的形式制定，而不是位置参数

## 20. 用None和docstring来描述具有动态默认值的参数

- 动态默认值：如datatime.now(), 参数默认值在模块加载时求出
- 可变参数：list、dict
- 使用None代表默认值
  
## 21. 用只能以关键字形式指定的参数来确保代码明晰

- 关键字参数提升可读性
- 参数必须按照关键字提供，python 3中以`*`标识位置参数结束；python2 中可以利用`**`字典解包实现，要记录合法关键字

## 总结

- 关键字参数：使用关键字表示可选，扩展减少出错，可读性好
- 可变默认参数
- 闭包
- 迭代器参数处理
